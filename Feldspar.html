<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=0.7">
  <title>Media Display</title>
  <link rel="stylesheet" href="/design.css"> <!-- Link to your CSS file -->
  <!-- Other head elements -->
<style>
  body {
    margin: 0;
    padding: 0;
    background-image: url('Screenshot 2023-11-05 at 10.56.12â€¯PM.png');
    background-size: cover;
    font-family: Arial, sans-serif;
    position: relative;
  }
  .feldspar {
    color: yellow;
    font-family: 'FancyFontName', cursive; /* Replace with your fancy font */
    font-size: 2em;
    position: absolute;
    top: 10px;
    left: 17px;
    text-shadow: 2px 2px 4px #000;
  }
  .container {
    display: flex;
    justify-content: space-around;
    align-items: center;
    height: 90vh; /* Adjust based on your preference */
    margin: 0 10%;
  }
  .rectangle {
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
  }

  .search-container {
    position: fixed;
    bottom: 10px;
    right: 10px;
  }
  .search-bar {
    padding: 10px;
    font-size: 1em;
    border-radius: 20px; /* Rounded edges */
    border: none;
    outline: none;
    background-color: lightblue;
  }
</style>
</head>
<body>

<div class="feldspar">F e l d s p a r</div>

<!-- Search Container -->
<div class="search-container">
  <input type="text" id="searchBar" class="search-bar" placeholder="Search...">
  <!-- <button onclick="performSearch()">Search</button> -->
</div>

<script>
  
  let imageCheckInterval;

  function performSearch() {
    const searchTerm = document.getElementById('searchBar').value;

    fetch('/search', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ searchTerm: searchTerm }),
    })
    .then(response => response.json())
    .then(data => {
        console.log("Received data:", data);  // Log the received data
        if (data && data.results) {
            updateImagesAndLinks(data.results);
        }
    })
    .catch(error => console.error('Error:', error));
}

function updateImagesAndLinks(results) {
    results.forEach((result, index) => {
        const linkElement = document.getElementById(`link${index + 1}`);
        const rectangleElement = document.getElementById(`rect${index + 1}`);

        if (linkElement && rectangleElement) {
            rectangleElement.style.backgroundImage = `url('${result.img_url}')`;
            linkElement.href = result.url;  // This line should update the href
        }
    });
}

document.getElementById('searchBar').addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
      performSearch();
    }
  });

  
</script>

<div class="container">
  <a id="link1" href="#" target="_blank">
      <div id="rect1" class="rectangle"></div>
  </a>
  <a id="link2" href="#" target="_blank">
      <div id="rect2" class="rectangle"></div>
  </a>
  <a id="link3" href="#" target="_blank">
      <div id="rect3" class="rectangle"></div>
  </a>
</div>
</body>
</html>